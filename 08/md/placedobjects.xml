<?xml version="1.0" encoding="iso-8859-1" ?>
<mdscript name="PlacedObjects" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="md.xsd">
  <cues>
    <cue name="Start" version="4" mapeditor="false">
      <conditions>
        <event_cue_signalled cue="md.Setup.GameStart"/>
      </conditions>
      <actions>
        <do_if value="player.module == 'x4ep1_gamestart_tutorial2'">
          <signal_cue cue="Place_DataVaults_Scenario2"/>
        </do_if>
        <do_else>
          <!-- default placement of objects in the universe -->
          <signal_cue cue="Place_Claimable_Ships"/>
          <signal_cue cue="Place_Lockboxes"/>
          <signal_cue cue="Place_DataVaults"/>
          <signal_cue cue="Start_PlaceLockboxAroundPlayerShip"/>
        </do_else>
        <!-- 7.00 Placements -->
        <signal_cue cue="Place_FreedomsReach"/>
        <signal_cue cue="Place_Mookye"/>
      </actions>
      <patch sinceversion="1">
        <signal_cue cue="Start_PlaceLockboxAroundPlayerShip"/>
      </patch>
      <patch sinceversion="2">
        <signal_cue cue="Place_ParanidMonument"/>
        <signal_cue cue="Place_DerelictStationMonument"/>
      </patch>
      <patch sinceversion="3">
        <!-- patched by pirate dlc -->
      </patch>
      <patch sinceversion="4" comment="Timelines Placements Patched here too">
        <!-- 7.00 Placements -->
        <signal_cue cue="Place_FreedomsReach"/>
        <signal_cue cue="Place_Mookye"/>
      </patch>
    </cue>

    <!-- Freedom's Reach -->
    <cue name="Place_FreedomsReach" namespace="this" mapeditor="false">
      <conditions>
        <event_cue_signalled/>
        <check_value value="player.galaxy.macro == macro.xu_ep2_universe_macro" comment="only in main-galaxy" />
      </conditions>
      <actions>
        <find_cluster name="$FreedomsReach_Cluster" macro="macro.cluster_714_macro" required="1"/>
        <find_sector name="$FreedomsReach_Sector" macro="macro.cluster_714_sector001_macro" required="1"/>
        <create_object name="$Anomaly_Entry" macro="macro.wormhole_v1_standalone_macro" sector="$FreedomsReach_Sector">
          <position x="-145000m" y="0m" z="-56330m"/>
        </create_object>
        <create_object name="$Anomaly_Exit" macro="macro.wormhole_v1_standalone_macro" sector="$FreedomsReach_Sector">
          <position x="-359452m" y="10000m" z="-113913m"/>
          <rotation yaw="-60deg" pitch="0deg" roll="0deg"/>
        </create_object>
        <add_anomaly_destination anomaly="$Anomaly_Entry" destination="$Anomaly_Exit"/>
        <add_anomaly_destination anomaly="$Anomaly_Exit" destination="$Anomaly_Entry"/>
        <!-- Race Track Gates -->
        <create_object macro="macro.triggerobject_race_finish_01_macro" owner="faction.ownerless" sector="$FreedomsReach_Sector" spinning="0">
          <position x="-359197m" y="11110m" z="-120445m"/>
          <rotation yaw="-90deg" pitch="0deg" roll="0deg"/>
        </create_object>
        <create_object macro="macro.triggerobject_race_checkpoint_01_macro" owner="faction.ownerless" sector="$FreedomsReach_Sector" spinning="0">
          <position x="-359197m" y="11110m" z="-120445m"/>
          <rotation yaw="-90deg" pitch="0deg" roll="0deg"/>
        </create_object>
        <create_object macro="macro.triggerobject_race_checkpoint_01_macro" owner="faction.ownerless" sector="$FreedomsReach_Sector" spinning="0">
          <position x="-370785m" y="10050m" z="-120598m"/>
          <rotation yaw="-50deg" pitch="20deg" roll="0deg"/>
        </create_object>
        <create_object macro="macro.triggerobject_race_checkpoint_01_macro" owner="faction.ownerless" sector="$FreedomsReach_Sector" spinning="0">
          <position x="-376596m" y="9800m" z="-119391m"/>
          <rotation yaw="-120deg" pitch="0deg" roll="0deg"/>
        </create_object>
        <create_object macro="macro.triggerobject_race_checkpoint_01_macro" owner="faction.ownerless" sector="$FreedomsReach_Sector" spinning="0">
          <position x="-392821m" y="10000m" z="-112228m"/>
          <rotation yaw="-30deg" pitch="0deg" roll="0deg"/>
        </create_object>
        <create_object macro="macro.triggerobject_race_checkpoint_01_macro" owner="faction.ownerless" sector="$FreedomsReach_Sector" spinning="0">
          <position x="-395201m" y="10302m" z="-108615m"/>
          <rotation yaw="-80deg" pitch="-20deg" roll="0deg"/>
        </create_object>
        <create_object macro="macro.triggerobject_race_checkpoint_01_macro" owner="faction.ownerless" sector="$FreedomsReach_Sector" spinning="0">
          <position x="-411753m" y="10035m" z="-95235m"/>
          <rotation yaw="-25deg" pitch="0deg" roll="0deg"/>
        </create_object>
        <create_object macro="macro.triggerobject_race_checkpoint_01_macro" owner="faction.ownerless" sector="$FreedomsReach_Sector" spinning="0">
          <position x="-401403m" y="9840m" z="-88580m"/>
          <rotation yaw="100deg" pitch="0deg" roll="0deg"/>
        </create_object>
        <create_object macro="macro.triggerobject_race_checkpoint_01_macro" owner="faction.ownerless" sector="$FreedomsReach_Sector" spinning="0">
          <position x="-391326m" y="11211m" z="-98123m"/>
          <rotation yaw="135deg" pitch="0deg" roll="0deg"/>
        </create_object>
        <create_object macro="macro.triggerobject_race_checkpoint_01_macro" owner="faction.ownerless" sector="$FreedomsReach_Sector" spinning="0">
          <position x="-376326m" y="10120m" z="-103900m"/>
          <rotation yaw="60deg" pitch="20deg" roll="0deg"/>
        </create_object>
        <create_object macro="macro.triggerobject_race_checkpoint_01_macro" owner="faction.ownerless" sector="$FreedomsReach_Sector" spinning="0">
          <position x="-372865m" y="11514m" z="-102511m"/>
          <rotation yaw="140deg" pitch="0deg" roll="0deg"/>
        </create_object>
        <create_object macro="macro.triggerobject_race_checkpoint_01_macro" owner="faction.ownerless" sector="$FreedomsReach_Sector" spinning="0">
          <position x="-369344m" y="9335m" z="--105549m"/>
          <rotation yaw="120deg" pitch="-20deg" roll="0deg"/>
        </create_object>
        <create_object macro="macro.triggerobject_race_checkpoint_01_macro" owner="faction.ownerless" sector="$FreedomsReach_Sector" spinning="0">
          <position x="-345779m" y="7658m" z="-105269m"/>
          <rotation yaw="130deg" pitch="0deg" roll="0deg"/>
        </create_object>
        <create_object macro="macro.triggerobject_race_checkpoint_01_macro" owner="faction.ownerless" sector="$FreedomsReach_Sector" spinning="0">
          <position x="-338098m" y="10080" z="-111759m"/>
          <rotation yaw="-180deg" pitch="0deg" roll="0deg"/>
        </create_object>
        <create_object macro="macro.triggerobject_race_checkpoint_01_macro" owner="faction.ownerless" sector="$FreedomsReach_Sector" spinning="0">
          <position x="-345377m" y="9587m" z="-119756m"/>
          <rotation yaw="-90deg" pitch="0deg" roll="0deg"/>
        </create_object>
        <!-- Asteroids -->
        <create_object macro="[macro.env_asteroid_xenon_xl_04_macro].random" sector="$FreedomsReach_Sector" owner="faction.ownerless" spinning="false">
          <position x="-361211m" y="10000m" z="-119366m"/>
          <rotation yaw="10deg" pitch="0deg" roll="0deg"/>
        </create_object>
        <create_object macro="[macro.env_asteroid_xenon_xxl_05_macro].random" sector="$FreedomsReach_Sector" owner="faction.ownerless" spinning="false">
          <position x="-372749m" y="11450m" z="-119735m"/>
          <rotation yaw="90deg" pitch="0deg" roll="0deg"/>
        </create_object>
        <create_object macro="[macro.env_asteroid_xenon_xl_04_macro].random" sector="$FreedomsReach_Sector" owner="faction.ownerless" spinning="false">
          <position x="-396316m" y="10000m" z="-110147m"/>
          <rotation yaw="0deg" pitch="0deg" roll="0deg"/>
        </create_object>
        <create_object macro="[macro.env_asteroid_xenon_xl_02_macro].random" sector="$FreedomsReach_Sector" owner="faction.ownerless" spinning="false">
          <position x="-404918m" y="9900m" z="-104874m"/>
          <rotation yaw="-19deg" pitch="0deg" roll="0deg"/>
        </create_object>
        <create_object macro="[macro.env_asteroid_xenon_xl_02_macro].random" sector="$FreedomsReach_Sector" owner="faction.ownerless" spinning="false">
          <position x="-405481m" y="9780m" z="-100354m"/>
          <rotation yaw="16deg" pitch="0deg" roll="0deg"/>
        </create_object>
        <create_object macro="[macro.env_asteroid_xenon_xl_02_macro].random" sector="$FreedomsReach_Sector" owner="faction.ownerless" spinning="false">
          <position x="-409658m" y="9013m" z="-99344m"/>
          <rotation yaw="33deg" pitch="0deg" roll="0deg"/>
        </create_object>
        <create_object macro="[macro.env_asteroid_xenon_xxl_07_macro].random" sector="$FreedomsReach_Sector" owner="faction.ownerless" spinning="false">
          <position x="-385246m" y="10000m" z="-108126m"/>
          <rotation yaw="105deg" pitch="0deg" roll="0deg"/>
        </create_object>
        <create_object macro="[macro.env_asteroid_xenon_xxl_07_macro].random" sector="$FreedomsReach_Sector" owner="faction.ownerless" spinning="false">
          <position x="-372194m" y="11444m" z="-103747m"/>
          <rotation yaw="-36deg" pitch="0deg" roll="0deg"/>
        </create_object>
        <create_object macro="[macro.env_asteroid_xenon_xl_04_macro].random" sector="$FreedomsReach_Sector" owner="faction.ownerless" spinning="false">
          <position x="-359934m" y="10180m" z="-107867m"/>
          <rotation yaw="235deg" pitch="0deg" roll="0deg"/>
        </create_object>
        <create_object macro="[macro.env_asteroid_xenon_l_02_macro].random" sector="$FreedomsReach_Sector" owner="faction.ownerless" spinning="false">
          <position x="-346774m" y="8183m" z="-106015m"/>
          <rotation yaw="88deg" pitch="0deg" roll="0deg"/>
        </create_object>
        <create_object macro="[macro.env_asteroid_xenon_xxl_06_macro].random" sector="$FreedomsReach_Sector" owner="faction.ownerless" spinning="false">
          <position x="-340678m" y="10142m" z="-113460m"/>
          <rotation yaw="0deg" pitch="0deg" roll="0deg"/>
        </create_object>
        <create_object macro="[macro.env_asteroid_xenon_xxl_07_macro].random" sector="$FreedomsReach_Sector" owner="faction.ownerless" spinning="false">
          <position x="-346834m" y="9740m" z="-119178m"/>
          <rotation yaw="165deg" pitch="0deg" roll="0deg"/>
        </create_object>
        <create_object macro="[macro.env_asteroid_xenon_xl_04_macro].random" sector="$FreedomsReach_Sector" owner="faction.ownerless" spinning="false">
          <position x="-356170m" y="10120m" z="-121194m"/>
          <rotation yaw="45deg" pitch="0deg" roll="0deg"/>
        </create_object>
        <do_all min="20" max="30">
          <set_value name="$RotationYaw" min="0deg" max="360deg"/>
          <set_value name="$Position_X" min="1km" max="25km"/>
          <set_value name="$Position_Y" min="0km" max="4km"/>
          <set_value name="$Position_Z" min="1km" max="10km"/>
          <create_station groupname="$AstroStations" macro="macro.asteroid_turret_m_01_macro" sector="$FreedomsReach_Sector" owner="faction.xenon" state="componentstate.operational">
            <position x="-356170m + $Position_X" y="10000m + $Position_Y" z="-121194m + $Position_Z"/>
            <rotation yaw="$RotationYaw" pitch="0deg" roll="0deg"/>
          </create_station>
        </do_all>
        <do_for_each name="$Station" in="$AstroStations">
          <signal_objects object="player.galaxy" param="'init station'" param2="$Station" param3="false" comment="Add control entities."/>
        </do_for_each>
      </actions>
    </cue>

    <!-- Moo-Kye's Revenge -->
    <cue name="Place_Mookye" namespace="this" mapeditor="false" version="2">
      <conditions>
        <event_cue_signalled/>
        <check_value value="player.galaxy.macro == macro.xu_ep2_universe_macro" comment="only in main-galaxy" />
      </conditions>
      <actions>
        <find_cluster name="$Mookye_Cluster" macro="macro.cluster_710_macro" required="1"/>
        <find_sector name="$Mookye_Sector" macro="macro.cluster_710_sector001_macro" required="1"/>
        <create_object name="$TFMWreck_710" macro="macro.landmarks_tfm_xl_carrier_01_macro" sector="$Mookye_Sector" owner="faction.ownerless" spinning="false">
          <position x="380000" y="0" z="-22000"/>
          <rotation yaw="0deg" pitch="0deg" roll="0deg"/>
        </create_object>
        <!-- Xenon Stations -->
        <set_value name="$PositionAngle" exact="0deg"/>
        <set_value name="$RotationYaw" exact="0deg"/>
        <do_all exact="3">
          <set_value name="$PositionDistance" exact="12km"/>
          <set_value name="$PositionHeight" exact="0km"/>
          <create_station name="$Station" macro="macro.xenon_asteroid_01_base_01_macro" owner="faction.xenon" sector="$Mookye_Sector" state="componentstate.operational">
            <position object="$TFMWreck_710" x="$PositionDistance * sin($PositionAngle)" y="0km" z="$PositionDistance * cos($PositionAngle)"/>
            <rotation yaw="$RotationYaw" pitch="0deg" roll="0deg"/>
          </create_station>
          <signal_objects object="player.galaxy" param="'init station'" param2="$Station" param3="false" comment="Add control entities."/>
          <set_value name="$PositionAngle" exact="120deg" operation="add"/>
          <set_value name="$RotationYaw" exact="120deg" operation="add"/>
        </do_all>

        <set_value name="$PositionAngle" exact="0deg"/>
        <do_all exact="6">
          <set_value name="$PositionDistance" exact="6km"/>
          <set_value name="$PositionHeight" min="0km" max="1km"/>
          <set_value name="$RotationYaw" min="0deg" max="360deg"/>
          <create_station groupname="$AsteroidTurret" macro="macro.asteroid_turret_m_01_macro" owner="faction.xenon" sector="$Mookye_Sector" state="componentstate.operational">
            <position object="$TFMWreck_710" x="$PositionDistance * sin($PositionAngle)" y="0km" z="$PositionDistance * cos($PositionAngle)"/>
            <rotation yaw="$RotationYaw" pitch="0deg" roll="0deg"/>
          </create_station>
          <set_value name="$PositionAngle" exact="60deg" operation="add"/>
        </do_all>
        <do_for_each name="$Station" in="$AsteroidTurret">
          <signal_objects object="player.galaxy" param="'init station'" param2="$Station" param3="false" comment="Add control entities."/>
        </do_for_each>

        <!-- XXL Asteroids -->
        <set_value name="$PositionAngle" exact="60deg"/>
        <set_value name="$RotationYaw" exact="60deg"/>
        <do_all exact="3">
          <set_value name="$PositionDistance" exact="12km"/>
          <set_value name="$PositionHeight" exact="0km"/>
          <create_object macro="[macro.env_asteroid_xenon_xxl_07_macro].random" sector="$Mookye_Sector" owner="faction.ownerless" spinning="false">
            <position object="$TFMWreck_710" x="$PositionDistance * sin($PositionAngle)" y="0km" z="$PositionDistance * cos($PositionAngle)"/>
            <rotation yaw="$RotationYaw" pitch="0deg" roll="0deg"/>
          </create_object>
          <set_value name="$PositionAngle" exact="120deg" operation="add"/>
          <set_value name="$RotationYaw" exact="120deg" operation="add"/>
        </do_all>

        <!-- Inner Ring Small Asteroids -->
        <set_value name="$PositionAngle" exact="0deg"/>
        <do_all exact="12">
          <set_value name="$PositionDistance" min="6km" max="9km" />
          <set_value name="$PositionHeight" min="-2km" max="2km"/>
          <set_value name="$RotationYaw" min="0deg" max="360deg"/>
          <create_object macro="[macro.env_asteroid_xenon_s_01_macro, macro.env_asteroid_xenon_m_01_macro, macro.env_asteroid_xenon_m_02_macro].random" sector="$Mookye_Sector" owner="faction.ownerless" spinning="false">
            <position object="$TFMWreck_710" x="$PositionDistance * sin($PositionAngle)" y="0km" z="$PositionDistance * cos($PositionAngle)"/>
            <rotation yaw="$RotationYaw" pitch="0deg" roll="0deg"/>
          </create_object>
          <set_value name="$PositionAngle" exact="30deg" operation="add"/>
        </do_all>

        <!-- 1st Outer Ring Large Asteroids -->
        <set_value name="$PositionAngle" exact="30"/>
        <do_all exact="12">
          <set_value name="$PositionDistance" min="15km" max="20km"/>
          <set_value name="$PositionHeight" min="-3km" max="3km"/>
          <set_value name="$RotationYaw" min="0deg" max="360deg"/>
          <create_object macro="[macro.env_asteroid_xenon_xl_04_macro, macro.env_asteroid_xenon_xl_05_macro, macro.env_asteroid_xenon_xxl_01_macro, macro.env_asteroid_xenon_xxl_04_macro, macro.env_asteroid_xenon_xxl_06_macro].random" sector="$Mookye_Sector" owner="faction.ownerless" spinning="false">
            <position object="$TFMWreck_710" x="$PositionDistance * sin($PositionAngle)" y="0m" z="$PositionDistance * cos($PositionAngle)"/>
            <rotation yaw="$RotationYaw" pitch="0deg" roll="0deg"/>
          </create_object>
          <set_value name="$PositionAngle" exact="30" operation="add"/>
        </do_all>

        <!-- 2st Outer Ring Medium Asteroids -->
        <set_value name="$PositionAngle" exact="0"/>
        <do_all exact="12">
          <set_value name="$PositionDistance" min="21km" max="25km"/>
          <set_value name="$PositionHeight" min="-3km" max="3km"/>
          <set_value name="$RotationYaw" min="0deg" max="360deg"/>
          <create_object macro="[macro.env_asteroid_xenon_l_01_macro, macro.env_asteroid_xenon_l_02_macro, macro.env_asteroid_xenon_xl_01_macro, macro.env_asteroid_xenon_xl_02_macro].random" sector="$Mookye_Sector" owner="faction.ownerless" spinning="false">
            <position object="$TFMWreck_710" x="$PositionDistance * sin($PositionAngle)" y="0m" z="$PositionDistance * cos($PositionAngle)"/>
            <rotation yaw="$RotationYaw" pitch="0deg" roll="0deg"/>
          </create_object>
          <set_value name="$PositionAngle" exact="30" operation="add"/>
        </do_all>

        <!-- 3rd Outer Ring Small Asteroids -->
        <set_value name="$PositionAngle" exact="0deg"/>
        <do_all exact="36">
          <set_value name="$PositionDistance" min="14km" max="24km" />
          <set_value name="$PositionHeight" min="-2km" max="2km"/>
          <set_value name="$RotationYaw" min="0deg" max="360deg"/>
          <create_object macro="[macro.env_asteroid_xenon_s_01_macro, macro.env_asteroid_xenon_m_01_macro, macro.env_asteroid_xenon_m_02_macro].random" sector="$Mookye_Sector" owner="faction.ownerless" spinning="false">
            <position object="$TFMWreck_710" x="$PositionDistance * sin($PositionAngle)" y="0km" z="$PositionDistance * cos($PositionAngle)"/>
            <rotation yaw="$RotationYaw" pitch="0deg" roll="0deg"/>
          </create_object>
          <set_value name="$PositionAngle" exact="10deg" operation="add"/>
        </do_all>
      </actions>
      <patch sinceversion="2">
        <find_station name="$XenonAsteroidStations" space="$Mookye_Sector" macro="macro.xenon_asteroid_01_base_01_macro" multiple="1"/>
        <do_for_each name="$Station" in="$XenonAsteroidStations">
          <signal_objects object="player.galaxy" param="'init station'" param2="$Station" param3="false" comment="Add control entities."/>
        </do_for_each>
        <do_for_each name="$Turret" in="$AsteroidTurret">
          <destroy_object object="$Turret" explosion="false"/>
        </do_for_each>
        <set_value name="$PositionAngle" exact="0deg"/>
        <do_all exact="6">
          <set_value name="$PositionDistance" exact="6km"/>
          <set_value name="$PositionHeight" min="0km" max="1km"/>
          <set_value name="$RotationYaw" min="0deg" max="360deg"/>
          <create_station groupname="$AsteroidTurret" macro="macro.asteroid_turret_m_01_macro" owner="faction.xenon" sector="$Mookye_Sector" state="componentstate.operational">
            <position object="$TFMWreck_710" x="$PositionDistance * sin($PositionAngle)" y="0km" z="$PositionDistance * cos($PositionAngle)"/>
            <rotation yaw="$RotationYaw" pitch="0deg" roll="0deg"/>
          </create_station>
          <set_value name="$PositionAngle" exact="60deg" operation="add"/>
        </do_all>
        <do_for_each name="$Station" in="$AsteroidTurret">
          <signal_objects object="player.galaxy" param="'init station'" param2="$Station" param3="false" comment="Add control entities."/>
        </do_for_each>
      </patch>
      <cues>
        <cue name="Blast_from_the_Past_Achievement_Reward">
          <conditions>
            <event_object_known_to_player object="$TFMWreck_710"/>
          </conditions>
          <actions>
            <unlock_achievement name="VISIT_WRECK"/>
          </actions>
        </cue>
      </cues>
    </cue>
    
    <!-- Mists of Artemis -->
    <cue name="Place_MistsOfArtemis" namespace="this" mapeditor="false">
      <conditions>
        <event_cue_signalled/>
        <check_value value="player.galaxy.macro == macro.xu_ep2_universe_macro" comment="only in main-galaxy" />
      </conditions>
      <actions>
        <find_sector name="$MistsOfArtemis_Sector" macro="macro.cluster_715_sector001_macro" required="1"/>
        <find_station name="$KhaakStation" godstationentry="'kha_station_cluster_715_01'" space="$MistsOfArtemis_Sector" required="1"/>
        <set_value name="$Spin" exact="0"/>
        <set_value name="$PositionAngle" exact="0deg"/>
        <set_value name="$Amount" min="30" max="40"/>
        <set_value name="$Steps" exact="360/$Amount"/>
        <do_all exact="$Amount">
          <set_value name="$PositionDistance" min="14km" max="24km" />
          <set_value name="$PositionHeight" min="-5km" max="5km"/>
          <set_value name="$RotationYaw" min="0deg" max="360deg"/>
          <do_any>
            <create_object name="$Asteroid" macro="[macro.env_asteroid_xenon_l_01_macro, macro.env_asteroid_xenon_l_02_macro, macro.env_asteroid_xenon_xl_01_macro, macro.env_asteroid_xenon_xl_02_macro].random" sector="$MistsOfArtemis_Sector" owner="faction.ownerless" spinning="false" weight="6">
              <position object="$KhaakStation" x="$PositionDistance * sin($PositionAngle)" y="$PositionHeight" z="$PositionDistance * cos($PositionAngle)"/>
              <rotation yaw="$RotationYaw" pitch="0deg" roll="0deg"/>
            </create_object>
            <do_all weight="4">
              <set_value name="$Spin" exact="1" chance="40"/>
              <create_object macro="[macro.env_debris_debris_xl_02_macro, macro.env_debris_debris_xl_05_macro, macro.env_debris_debris_xl_06_macro, macro.env_debris_debris_xl_08_macro].random" sector="$MistsOfArtemis_Sector" owner="faction.ownerless" spinning="$Spin">
                <position object="$KhaakStation" x="$PositionDistance * sin($PositionAngle)" y="$PositionHeight" z="$PositionDistance * cos($PositionAngle)"/>
              </create_object>
            </do_all>
          </do_any>
          <set_value name="$PositionAngle" exact="($Steps)deg" operation="add"/>
          <set_value name="$Spin" exact="0"/>
        </do_all>
      </actions>
      <cues>
        <cue name="Place_MistsOfArtemis_Khaak">
          <actions>
            <set_value name="$KhaakDefendersAmount" min="25" max="35"/>
            <create_group groupname="$KhaakDefenders"/>
          </actions>
          <cues>
            <cue name="Place_MistsOfArtemis_Khaak_Spawn" checkinterval="300s" instantiate="true">
              <conditions>
                <check_value value="$KhaakDefenders.count" max="$KhaakDefendersAmount"/>
              </conditions>
              <actions>
                <do_if value="$KhaakDefenders.count le 5">
                  <set_value name="$SpawnAmount" exact="4"/>
                </do_if>
                <do_elseif value="$KhaakDefenders.count le 10">
                  <set_value name="$SpawnAmount" exact="2"/>
                </do_elseif>
                <do_else>
                  <set_value name="$SpawnAmount" exact="1"/>
                </do_else>
                <do_if value="$KhaakStation.isoperational">
                  <do_all exact="$SpawnAmount">
                    <do_all exact="5" counter="$K">
                      <create_ship name="$Ship" sector="$MistsOfArtemis_Sector" groupname="$KhaakDefenders">
                        <select faction="faction.khaak" size="if $K le 2 then class.ship_m else class.ship_s"/>
                        <owner exact="faction.khaak"/>
                        <safepos object="$KhaakStation" max="10km"/>
                      </create_ship>
                      <create_order id="'ProtectStation'" object="$Ship" default="true">
                        <param name="station" value="$KhaakStation"/>
                        <param name="radius" value="15km"/>
                      </create_order>
                    </do_all>
                  </do_all>
                </do_if>
                <do_else>
                  <cancel_cue cue="Place_MistsOfArtemis_Khaak_Spawn"/>
                </do_else>
              </actions>
            </cue>
          </cues>
        </cue>
      </cues>
    </cue>

    <cue name="Start_Patch" onfail="cancel">
      <conditions>
        <check_value value="player.age" min="10s"/>
      </conditions>
      <actions>
        <force_cue cue="Start"/>
      </actions>
    </cue>

    <cue name="Place_Claimable_Ships" version="2">
      <conditions>
        <event_cue_signalled/>
      </conditions>
      <actions>

        <set_value name="$debugchance" exact="0"/>

        <!--<find_sector name="$sector" macro="macro.cluster_01_sector001_macro"/>
        <do_if value="$sector.exists">
          <create_ship name="$ship" macro="macro.ship_arg_s_fighter_02_a_macro" sector="$sector">
            <owner exact="faction.ownerless"/>
            <position x="150km" y="5km" z="123km"/>
            <rotation yaw="190deg" pitch="20deg" roll="10deg"/>
          </create_ship>
        </do_if>-->

        <!-- DANGEROUS REGION SHIELD DAMAGE - M ship-->
        <!--teleport sector="cluster_27_sector001_macro">
          <offset>
            <position x="-273913.469" y="-6518.523" z="268632.969"/>
            <rotation yaw="148.6297" pitch="-22.77495"/>
          </offset>
        </teleport-->
        <find_sector name="$sector" macro="macro.cluster_27_sector001_macro"/>
        <do_if value="$sector.exists">
          <create_ship name="$ship" macro="macro.ship_arg_m_miner_solid_01_a_macro" sector="$sector">
            <owner exact="faction.ownerless"/>
            <position x="-281km" y="-7.5km" z="254.632km"/>
            <rotation yaw="150deg" pitch="-20deg" roll="10deg"/>
          </create_ship>
        </do_if>

        <!-- Cluster 1 remote area - S ship-->
        <!--teleport sector="cluster_01_sector001_macro">
          <offset>
            <position x="-332267.688" y="24156.072" z="380257.156"/>
            <rotation yaw="-12.81401" pitch="9.27424"/>
          </offset>
        </teleport-->
        <find_sector name="$sector" macro="macro.cluster_01_sector001_macro"/>
        <do_if value="$sector.exists">
          <create_ship name="$ship" macro="macro.ship_arg_s_fighter_02_a_macro" sector="$sector">
            <owner exact="faction.ownerless"/>
            <position x="-332.267km" y="24.156km" z="380.257km"/>
            <rotation yaw="-12deg" pitch="9deg" roll="10deg"/>
          </create_ship>
        </do_if>


        <!--deep in xenon space - L ship-->
        <!--teleport sector="cluster_25_sector002_macro">
          <offset>
            <position x="-165396.516" y="-489.434" z="145876.938"/>
            <rotation yaw="-112.03669" pitch="0.620682"/>
          </offset>
        </teleport-->
        <find_sector name="$sector" macro="macro.cluster_25_sector002_macro"/>
        <do_if value="$sector.exists">
          <create_ship name="$ship" macro="macro.ship_par_l_destroyer_01_a_macro" sector="$sector">
            <owner exact="faction.ownerless"/>
            <position x="-165.396km" y="-0.489km" z="145.876km"/>
            <rotation yaw="-112deg" pitch="0.6deg" roll="30deg"/>
          </create_ship>
        </do_if>

        <!-- at the end of the super long exploration highway, further direction sun - S ship-->
        <!--teleport sector="cluster_04_sector001_macro">
          <offset>
            <position x="7323856" y="-28753.938" z="10249949"/>
            <rotation yaw="6.59343" pitch="-37.12818" roll="0.69816"/>
          </offset>
        </teleport-->
        <find_sector name="$sector" macro="macro.cluster_04_sector001_macro"/>
        <do_if value="$sector.exists">
          <create_ship name="$ship" macro="macro.ship_arg_s_trans_container_01_a_macro" sector="$sector">
            <owner exact="faction.ownerless"/>
            <position x="977.984km" y="2.922km" z="1175.323km"/>
            <rotation yaw="6deg" pitch="-37deg" roll="1deg"/>
          </create_ship>
        </do_if>

        <!--silent witness, "in the middle of nowhere" S ship-->
        <!--teleport sector="cluster_45_sector001_macro">
          <offset>
            <position x="56460.621" z="95379.75"/>
            <rotation yaw="-31.52667" pitch="3.69537"/>
          </offset>
        </teleport-->
        <find_sector name="$sector" macro="macro.cluster_45_sector001_macro"/>
        <do_if value="$sector.exists">
          <create_ship name="$ship" macro="macro.ship_par_s_fighter_01_a_macro" sector="$sector">
            <owner exact="faction.ownerless"/>
            <position x="56.460km" y="0.156km" z="95.379km"/>
            <rotation yaw="-31deg" pitch="4deg" roll="50deg"/>
          </create_ship>
        </do_if>

        <!--company regard, 100 km behind gate to xenon cluster M ship-->
        <!--teleport sector="cluster_20_sector001_macro">
          <offset>
            <position x="-147826.969" z="-185094.125"/>
            <rotation yaw="15.12853" pitch="-3.28322"/>
          </offset>
        </teleport-->
        <find_sector name="$sector" macro="macro.cluster_20_sector001_macro"/>
        <do_if value="$sector.exists">
          <create_ship name="$ship" macro="macro.ship_tel_m_frigate_01_a_macro" sector="$sector">
            <owner exact="faction.ownerless"/>
            <position x="-147.826km" y="-0.156km" z="-185.094km"/>
            <rotation yaw="15deg" pitch="-3deg" roll="-30deg"/>
          </create_ship>
        </do_if>

      </actions>
      <patch sinceversion="2">
        <find_sector name="$patch_sector" macro="macro.cluster_27_sector001_macro"/>
        <do_if value="$patch_sector.exists">
          <find_object name="$patch_ship" macro="macro.ship_arg_m_miner_solid_01_a_macro" owner="faction.ownerless" space="$patch_sector">
            <match_distance x="-274km" y="-6.5km" z="268.632km" space="$patch_sector" max="5km"/>
          </find_object>
          <do_if value="$patch_ship">
            <warp object="$patch_ship" sector="$patch_sector">
              <safepos x="-281km" y="-7.5km" z="254.632km"/>
              <rotation yaw="150deg" pitch="-20deg" roll="10deg"/>
            </warp>
            <debug_text text="'Moving placed ship ' + $patch_ship + ' ' + $patch_ship.knownname + ' in ' + $patch_sector + ' ' + $patch_sector.knownname" filter="savegame"/>
          </do_if>
        </do_if>
        <remove_value name="$patch_ship"/>
        <remove_value name="$patch_sector"/>
      </patch>
    </cue>
    <cue name="Place_Lockboxes">
      <conditions>
        <event_cue_signalled/>
      </conditions>
      <actions>
        <!--find_zone name="$zone" macro="macro.tzonecluster_a_sector01_zone100_macro"/>
        <do_if value="$zone.exists">
          <create_object name="$lockbox" macro="macro.prototype_lockbox_01_macro" zone="$zone">
            <position x="10000m" y="3000m" z="-5000m"/>
          </create_object>
          <do_if value="$lockbox.exists">
            <add_cargo object="$lockbox" exact="5" ware="ware.inv_agidevice_02"/-->
        <!--TODO: Apply rotation-->
        <!--/do_if>
        </do_if-->
      </actions>
    </cue>

    <cue name="Start_PlaceLockboxAroundPlayerShip">
      <conditions>
        <event_cue_signalled/>
      </conditions>
      <cues>
        <cue name="Check_PlaceLockboxAroundPlayerShip" instantiate="true" namespace="this" checkinterval="15min">
          <actions>
            <set_value name="$debugchance" exact="0"/>

            <do_if value="not $test?">
              <find_ship_by_true_owner name="$targetship" space="player.galaxy" faction="faction.player" docked="false" unit="false">
                <match class="class.spacesuit" negate="true"/>
                <match_pilot class="class.npc"/>
                <!--<match_attention min="attention.visible" negate="true"/>-->
                <match_context class="class.sector"/>
                <match_context class="class.highway" negate="true"/>
              </find_ship_by_true_owner>
            </do_if>
            <do_else>
              <find_ship_by_true_owner name="$targetship" space="player.galaxy" faction="faction.player" docked="false" unit="false">
                <match class="class.spacesuit" negate="true"/>
                <match_pilot class="class.player"/>
                <!--<match_attention min="attention.visible" negate="true"/>-->
                <match_context class="class.sector"/>
                <match_context class="class.highway" negate="true"/>
              </find_ship_by_true_owner>
            </do_else>
            <debug_text text="'found player-owned ship %s %s %s in sector %s.'.[@$targetship.idcode, @$targetship.knownname, $targetship, @$targetship.sector.knownname]" chance="$targetship.exists * $debugchance"/>

            <!-- sanity checks that have already been checked above because paranoia. -->
            <do_if value="not $targetship.exists">
              <debug_text text="'no player-owned ship found. no action.'" chance="$debugchance"/>
              <set_value name="$fail"/>
            </do_if>
            <do_elseif value="$targetship.isunit">
              <debug_text text="'found player-owned ship is a unit. no action.'" filter="error"/>
              <set_value name="$fail"/>
            </do_elseif>
            <do_elseif value="not $targetship.sector">
              <debug_text text="'found player-owned ship is not in a sector. no action.'" filter="error"/>
              <set_value name="$fail"/>
            </do_elseif>
            <do_elseif value="$targetship.zone.isclass.highway">
              <debug_text text="'found player-owned ship in a highway. no action'" filter="error"/>
              <set_value name="$fail"/>
            </do_elseif>
            <do_elseif value="not $targetship.pilot">
              <debug_text text="'found player-owned ship does not have a pilot. no action'" filter="error"/>
              <set_value name="$fail"/>
            </do_elseif>
            <do_elseif value="not $test? and $targetship == player.occupiedship">
              <debug_text text="'found player-owned ship is flown by the player. no action'" filter="error"/>
              <set_value name="$fail"/>
            </do_elseif>
            <!--<do_elseif value="$targetship.attention ge attention.visible">
              <debug_text text="'found player-owned ship is in invalid attention level: %s. no action'.[$targetship.attention]" filter="error"/>
              <set_value name="$fail"/>
            </do_elseif>-->

            <do_if value="not $fail?">
              <signal_cue_instantly cue="Evaluate_PlaceLockboxAroundShip" param="[$targetship, $test?, $debugchance]"/>
            </do_if>
          </actions>
        </cue>
      </cues>
    </cue>

    <!-- param: [$ship, $test?, $debugchance] -->
    <!-- note that there is still a chance that nothing is placed, if $ship is in a sector that has no region. -->
    <cue name="Evaluate_PlaceLockboxAroundShip" instantiate="true" namespace="this">
      <conditions>
        <event_cue_signalled/>
        <check_value value="event.param and @event.param.{1} and @event.param.{1}.isclass.ship and event.param.{1}.isoperational"/>
        <check_value value="event.param.{1}.sector and not event.param.{1}.zone.isclass.highway"/>
      </conditions>
      <actions>
        <set_value name="$ship" exact="event.param.{1}"/>
        <set_value name="$cleanuptime" exact="player.age + 2h"/>
        <set_value name="$debugchance" exact="@event.param.{3}"/>
        <set_value name="$test" exact="@event.param.{2}"/>

        <!-- NB: find_closest_octree_object only looks in the same zone as refobject -->
        <find_closest_octree_object name="$closestbigthing" refobject="$ship"/>

        <set_value name="$spawnchance" exact="0"/>

        <do_if value="@$ship.order.id == 'Explore'">
          <set_value name="$spawnchance" exact="$spawnchance + 30"/>
          <debug_text text="'ship is exploring. accumulated points: %s'.[$spawnchance]" chance="$debugchance"/>
        </do_if>
        <do_if value="not $closestbigthing.exists or $ship.distanceto.{$closestbigthing} gt $ship.maxradarrange">
          <debug_text text="'closest big thing is %s %s %s, %sm away from playership. (may be null)'.[@$closestbigthing.idcode, @$closestbigthing.knownname, $closestbigthing, @$ship.distanceto.{$closestbigthing}]" chance="$closestbigthing.exists * $debugchance"/>
          <set_value name="$distpts" exact="10"/>
          <do_if value="$closestbigthing.exists">
            <set_value name="$distpts" exact="[(($ship.distanceto.{$closestbigthing} - $ship.maxradarrange) / 10km)i, 10].min"/>
          </do_if>
          <set_value name="$spawnchance" exact="$spawnchance + 10 + $distpts"/>
          <debug_text text="'ship is away from closest station. accumulated points: %s'.[$spawnchance]" chance="$debugchance"/>
        </do_if>
        <do_if value="not $ship.commander and not $ship.subordinates.count">
          <set_value name="$spawnchance" exact="$spawnchance + 10"/>
          <debug_text text="'ship has no commander and no subordinates. accumulated points: %s'.[$spawnchance]" chance="$debugchance"/>
        </do_if>
        <do_if value="not $ship.iscapitalship">
          <set_value name="$spawnchance" exact="$spawnchance + 10"/>
          <debug_text text="'ship is not a capital ship. accumulated points: %s'.[$spawnchance]" chance="$debugchance"/>
        </do_if>
        <do_if value="$ship.type == shiptype.scout">
          <set_value name="$spawnchance" exact="$spawnchance + 20"/>
          <debug_text text="'ship is a scout ship. accumulated points: %s'.[$spawnchance]" chance="$debugchance"/>
        </do_if>
        <do_if value="$ship.order and ($ship.order.id != 'Wait') and ($ship.order.id != 'WaitForSignal')">
          <set_value name="$spawnchance" exact="$spawnchance + 10"/>
          <debug_text text="'ship is not doing nothing. accumulated points: %s'.[$spawnchance]" chance="$debugchance"/>
        </do_if>
        <do_else>
          <set_value name="$spawnchance" exact="0"/>
          <debug_text text="'ship is sitting still or has no order. accumulated points: %s'.[$spawnchance]" chance="$debugchance"/>
        </do_else>
        <!-- up to this point, max 100 points -->

        <!-- $averagelockboxdistinsector is -1 if no lockbox can be found in $ship.sector -->
        <set_value name="$averagelockboxdistinsector" exact="$ship.sector.averagedistancetolockbox"/>
        <set_value name="$skillfactor" exact="[($ship.combinedskill)f / ($averagelockboxdistinsector / 1000.0), 1.0].min"/>
        <debug_text text="'skill factor: %s. average lockbox dist: %sm, crew skill: %s'.[$skillfactor, $averagelockboxdistinsector, $ship.combinedskill]" chance="$debugchance"/>

        <set_value name="$spawnchance" exact="if $test then 100 else [($spawnchance * $skillfactor)i, 100].min"/>
        <debug_text text="'total points, capped at 100: %s'.[$spawnchance]" chance="$debugchance"/>

        <do_if value="($averagelockboxdistinsector gt 0) and $spawnchance" chance="$spawnchance">
          <set_value name="$lockboxmacro" exact="$ship.sector.typicallockboxmacro"/>
          <do_if value="@$lockboxmacro.isclass.lockbox">
            <set_value name="$radius" exact="100m"/>
            <do_if value="$lockboxmacro.boundingbox.exists">
              <set_value name="$radius" exact="$lockboxmacro.boundingbox.max.length"/>
              <debug_text text="'lockbox %s has a bounding box with size %sm'.[$lockboxmacro, $radius]" chance="$debugchance"/>
            </do_if>
            <set_value name="$offset" min="$ship.maxradarrange * 0.85" max="$ship.maxradarrange * 0.95"/>
            <set_value name="$offset" min="100m" max="200m" chance="$test * 100"/>
            <!-- spawn a lockbox at the edge of $ship's radar range. allow spawning above or below $ship. -->
            <create_lockbox name="$lockbox" macro="$lockboxmacro" sector="$ship.sector">
              <safepos object="$ship" exact="$offset" radius="$radius"/>
            </create_lockbox>
            <debug_text text="player.age + ': lockbox: %s %s %s spawned at some point %sm away from %s %s %s in sector %s'.[$lockboxmacro, @$lockbox.knownname, $lockbox, $offset, @$ship.idcode, @$ship.knownname, $ship, @$ship.sector.knownname]" chance="$debugchance"/>
          </do_if>
        </do_if>

        <do_if value="not @$lockbox.exists">
          <cancel_cue cue="this"/>
        </do_if>
      </actions>
      <cues>
        <cue name="CleanupLockbox" checktime="$cleanuptime" checkinterval="1min" onfail="cancel">
          <conditions>
            <check_value value="@$lockbox.exists"/>
          </conditions>
          <actions>
            <do_if value="$lockbox.attention lt attention.visible">
              <destroy_object object="$lockbox"/>
              <debug_text text="player.age + ': lockbox %s cleaned up.'.[$lockbox]" chance="$debugchance"/>
              <cancel_cue cue="parent"/>
            </do_if>
            <do_else>
              <set_value name="$cleanuptime" exact="player.age + 1min"/>
              <debug_text text="player.age + ': lockbox %s is visible. checking to clean up later.'.[$lockbox]" chance="$debugchance"/>
              <reset_cue cue="this"/>
            </do_else>
          </actions>
        </cue>
        <cue name="LockboxOpened">
          <conditions>
            <event_object_dropped_objects object="$lockbox" check="false"/>
          </conditions>
          <actions>
            <debug_text text="'lockbox %s just dramatically regurgitated its contents. cleaning up instance.'.[$lockbox]" chance="$debugchance"/>
            <cancel_cue cue="parent"/>
          </actions>
        </cue>
        <cue name="LockboxDestroyed">
          <conditions>
            <event_object_destroyed object="$lockbox" check="false"/>
          </conditions>
          <actions>
            <debug_text text="'lockbox %s destroyed. cleaning up instance.'.[$lockbox]" chance="$debugchance"/>
            <cancel_cue cue="parent"/>
          </actions>
        </cue>
      </cues>
    </cue>

    <cue name="Place_DataVaults" version="5">
      <conditions>
        <event_cue_signalled/>
      </conditions>
      <actions>
        <create_group groupname="$VaultsGroup"/>
        <create_group groupname="$UnlockedVaultsGroup"/>

        <!--data vaults-->
        <find_zone name="$zone" macro="macro.Zone003_Cluster_28_Sector001_macro"/>
        <do_if value="$zone.exists">
          <create_object name="$vault" groupname="$VaultsGroup" owner="faction.ownerless" macro="macro.landmarks_vault_01_macro" zone="$zone">
            <position x="-27000m" y="0m" z="-49000m"/>
          </create_object>
          <do_if value="$vault.exists">
            <find_signalleak_location name="$slot" container="$vault"/>
            <create_signal_leak name="$leak1" type="signalleaktype.data" object="$vault" slot="$slot" macro="macro.dataleak_xs_vault_01_macro"/>
            <!--add_cargo object="$lockbox" exact="5" ware="ware.inv_agidevice_02"/-->
            <!--TODO: Apply rotation-->
          </do_if>
        </do_if>
        <find_zone name="$zone" macro="macro.Zone003_Cluster_29_Sector002_macro"/>
        <do_if value="$zone.exists">
          <create_object name="$vault" groupname="$VaultsGroup" owner="faction.ownerless" macro="macro.landmarks_vault_01_macro" zone="$zone">
            <position x="-20800m" y="0m" z="42130m"/>
          </create_object>
          <do_if value="$vault.exists">
            <find_signalleak_location name="$slot" container="$vault"/>
            <create_signal_leak name="$leak2" type="signalleaktype.data" object="$vault" slot="$slot" macro="macro.dataleak_xs_vault_01_macro"/>
            <!--add_cargo object="$lockbox" exact="5" ware="ware.inv_agidevice_02"/-->
            <!--TODO: Apply rotation-->
          </do_if>
        </do_if>
        <find_zone name="$zone" macro="macro.Zone001_Cluster_47_Sector001_macro"/>
        <do_if value="$zone.exists">
          <create_object name="$vault" groupname="$VaultsGroup" owner="faction.ownerless" macro="macro.landmarks_vault_01_macro" zone="$zone">
            <position x="-38600m" y="0m" z="40998m"/>
          </create_object>
          <do_if value="$vault.exists">
            <find_signalleak_location name="$slot" container="$vault"/>
            <create_signal_leak name="$leak3" type="signalleaktype.data" object="$vault" slot="$slot" macro="macro.dataleak_xs_vault_01_macro"/>
            <!--add_cargo object="$lockbox" exact="5" ware="ware.inv_agidevice_02"/-->
            <!--TODO: Apply rotation-->
          </do_if>
        </do_if>
        <find_zone name="$zone" macro="macro.Zone003_Cluster_38_Sector001_macro"/>
        <do_if value="$zone.exists">
          <create_object name="$vault" groupname="$VaultsGroup" owner="faction.ownerless" macro="macro.landmarks_vault_01_macro" zone="$zone">
            <position x="43755m" y="500m" z="-30984m"/>
          </create_object>
          <do_if value="$vault.exists">
            <find_signalleak_location name="$slot" container="$vault"/>
            <create_signal_leak name="$leak4" type="signalleaktype.data" object="$vault" slot="$slot" macro="macro.dataleak_xs_vault_01_macro"/>
            <!--add_cargo object="$lockbox" exact="5" ware="ware.inv_agidevice_02"/-->
            <!--TODO: Apply rotation-->
          </do_if>
        </do_if>
        <find_zone name="$zone" macro="macro.Zone003_Cluster_15_Sector002_macro"/>
        <do_if value="$zone.exists">
          <create_object name="$vault" groupname="$VaultsGroup" owner="faction.ownerless" macro="macro.landmarks_vault_01_macro" zone="$zone">
            <position x="-34997m" y="-300m" z="14740m"/>
          </create_object>
          <do_if value="$vault.exists">
            <find_signalleak_location name="$slot" container="$vault"/>
            <create_signal_leak name="$leak5" type="signalleaktype.data" object="$vault" slot="$slot" macro="macro.dataleak_xs_vault_01_macro"/>
            <!--add_cargo object="$lockbox" exact="5" ware="ware.inv_agidevice_02"/-->
            <!--TODO: Apply rotation-->
          </do_if>
        </do_if>

        <find_zone name="$zone" macro="macro.Zone002_Cluster_21_Sector002_macro"/>
        <do_if value="$zone.exists">
          <create_object name="$vault" groupname="$VaultsGroup" owner="faction.ownerless" macro="macro.landmarks_vault_02_macro" zone="$zone">
            <position x="-9730m" y="450m" z="25536m"/>
          </create_object>
          <do_if value="$vault.exists">
            <find_signalleak_location name="$slot" container="$vault"/>
            <create_signal_leak name="$leak6" type="signalleaktype.data" object="$vault" slot="$slot" macro="macro.dataleak_xs_vault_01_macro"/>
            <!--add_cargo object="$lockbox" exact="5" ware="ware.inv_agidevice_02"/-->
            <!--TODO: Apply rotation-->
          </do_if>
        </do_if>
        <find_zone name="$zone" macro="macro.Zone001_Cluster_06_Sector001_macro"/>
        <do_if value="$zone.exists">
          <create_object name="$vault" groupname="$VaultsGroup" owner="faction.ownerless" macro="macro.landmarks_vault_02_macro" zone="$zone">
            <position x="39200m" y="-350m" z="-38400m"/>
          </create_object>
          <do_if value="$vault.exists">
            <find_signalleak_location name="$slot" container="$vault"/>
            <create_signal_leak name="$leak7" type="signalleaktype.data" object="$vault" slot="$slot" macro="macro.dataleak_xs_vault_01_macro"/>
            <!--add_cargo object="$lockbox" exact="5" ware="ware.inv_agidevice_02"/-->
            <!--TODO: Apply rotation-->
          </do_if>
        </do_if>
        <find_zone name="$zone" macro="macro.Zone005_Cluster_36_Sector001_macro"/>
        <do_if value="$zone.exists">
          <create_object name="$vault" groupname="$VaultsGroup" owner="faction.ownerless" macro="macro.landmarks_vault_02_macro" zone="$zone">
            <position x="-36500m" y="-80m" z="32120m"/>
          </create_object>
          <do_if value="$vault.exists">
            <find_signalleak_location name="$slot" container="$vault"/>
            <create_signal_leak name="$leak8" type="signalleaktype.data" object="$vault" slot="$slot" macro="macro.dataleak_xs_vault_01_macro"/>
            <!--add_cargo object="$lockbox" exact="5" ware="ware.inv_agidevice_02"/-->
            <!--TODO: Apply rotation-->
          </do_if>
        </do_if>
        <find_zone name="$zone" macro="macro.Zone002_Cluster_44_Sector001_macro"/>
        <do_if value="$zone.exists">
          <create_object name="$vault" groupname="$VaultsGroup" owner="faction.ownerless" macro="macro.landmarks_vault_02_macro" zone="$zone">
            <position x="36356m" y="120m" z="33710m"/>
          </create_object>
          <do_if value="$vault.exists">
            <find_signalleak_location name="$slot" container="$vault"/>
            <create_signal_leak name="$leak9" type="signalleaktype.data" object="$vault" slot="$slot" macro="macro.dataleak_xs_vault_01_macro"/>
            <!--add_cargo object="$lockbox" exact="5" ware="ware.inv_agidevice_02"/-->
            <!--TODO: Apply rotation-->
          </do_if>
        </do_if>
        <find_zone name="$zone" macro="macro.Zone005_Cluster_31_Sector001_macro"/>
        <do_if value="$zone.exists">
          <create_object name="$vault" groupname="$VaultsGroup" owner="faction.ownerless" macro="macro.landmarks_vault_02_macro" zone="$zone">
            <position x="45529m" y="-600m" z="13172m"/>
          </create_object>
          <do_if value="$vault.exists">
            <find_signalleak_location name="$slot" container="$vault"/>
            <create_signal_leak name="$leak10" type="signalleaktype.data" object="$vault" slot="$slot" macro="macro.dataleak_xs_vault_01_macro"/>
            <!--add_cargo object="$lockbox" exact="5" ware="ware.inv_agidevice_02"/-->
            <!--TODO: Apply rotation-->
          </do_if>
        </do_if>

        <find_zone name="$zone" macro="macro.Zone001_Cluster_07_Sector001_macro"/>
        <do_if value="$zone.exists">
          <create_object name="$vault" groupname="$VaultsGroup" owner="faction.ownerless" macro="macro.landmarks_vault_03_macro" zone="$zone">
            <position x="-49879m" y="30m" z="-47859m"/>
          </create_object>
          <do_if value="$vault.exists">
            <find_signalleak_location name="$slot" container="$vault"/>
            <create_signal_leak name="$leak11" type="signalleaktype.data" object="$vault" slot="$slot" macro="macro.dataleak_xs_vault_01_macro"/>
            <!--add_cargo object="$lockbox" exact="5" ware="ware.inv_agidevice_02"/-->
            <!--TODO: Apply rotation-->
          </do_if>
        </do_if>
        <find_zone name="$zone" macro="macro.Zone003_Cluster_01_Sector001_macro"/>
        <do_if value="$zone.exists">
          <create_object name="$vault" groupname="$VaultsGroup" owner="faction.ownerless" macro="macro.landmarks_vault_03_macro" zone="$zone">
            <position x="32276m" y="600m" z="-33642m"/>
          </create_object>
          <do_if value="$vault.exists">
            <find_signalleak_location name="$slot" container="$vault"/>
            <create_signal_leak name="$leak12" type="signalleaktype.data" object="$vault" slot="$slot" macro="macro.dataleak_xs_vault_01_macro"/>
            <!--add_cargo object="$lockbox" exact="5" ware="ware.inv_agidevice_02"/-->
            <!--TODO: Apply rotation-->
          </do_if>
        </do_if>
        <find_zone name="$zone" macro="macro.Zone002_Cluster_04_Sector002_macro"/>
        <do_if value="$zone.exists">
          <create_object name="$vault" groupname="$VaultsGroup" owner="faction.ownerless" macro="macro.landmarks_vault_03_macro" zone="$zone">
            <position x="20865m" y="540m" z="26749m"/>
          </create_object>
          <do_if value="$vault.exists">
            <find_signalleak_location name="$slot" container="$vault"/>
            <create_signal_leak name="$leak13" type="signalleaktype.data" object="$vault" slot="$slot" macro="macro.dataleak_xs_vault_01_macro"/>
            <!--add_cargo object="$lockbox" exact="5" ware="ware.inv_agidevice_02"/-->
            <!--TODO: Apply rotation-->
          </do_if>
        </do_if>
        <find_zone name="$zone" macro="macro.Zone004_Cluster_17_Sector001_macro"/>
        <do_if value="$zone.exists">
          <create_object name="$vault" groupname="$VaultsGroup" owner="faction.ownerless" macro="macro.landmarks_vault_03_macro" zone="$zone">
            <position x="-38846m" y="-340m" z="44199m"/>
          </create_object>
          <do_if value="$vault.exists">
            <find_signalleak_location name="$slot" container="$vault"/>
            <create_signal_leak name="$leak14" type="signalleaktype.data" object="$vault" slot="$slot" macro="macro.dataleak_xs_vault_01_macro"/>
            <!--add_cargo object="$lockbox" exact="5" ware="ware.inv_agidevice_02"/-->
            <!--TODO: Apply rotation-->
          </do_if>
        </do_if>
        <find_zone name="$zone" macro="macro.Zone005_Cluster_35_Sector001_macro"/>
        <do_if value="$zone.exists">
          <create_object name="$vault" groupname="$VaultsGroup" owner="faction.ownerless" macro="macro.landmarks_vault_03_macro" zone="$zone">
            <position x="20328m" y="-300m" z="-30915m"/>
          </create_object>
          <do_if value="$vault.exists">
            <find_signalleak_location name="$slot" container="$vault"/>
            <create_signal_leak name="$leak15" type="signalleaktype.data" object="$vault" slot="$slot" macro="macro.dataleak_xs_vault_01_macro"/>
            <!--add_cargo object="$lockbox" exact="5" ware="ware.inv_agidevice_02"/-->
            <!--TODO: Apply rotation-->
          </do_if>
        </do_if>

        <find_zone name="$zone" macro="macro.Zone003_Cluster_13_Sector001_macro"/>
        <do_if value="$zone.exists">
          <create_object name="$vault" groupname="$VaultsGroup" owner="faction.ownerless" macro="macro.landmarks_vault_04_macro" zone="$zone">
            <position x="-41200m" y="-200m" z="2439m"/>
          </create_object>
          <do_if value="$vault.exists">
            <find_signalleak_location name="$slot" container="$vault"/>
            <create_signal_leak name="$leak16" type="signalleaktype.data" object="$vault" slot="$slot" macro="macro.dataleak_xs_vault_01_macro"/>
            <!--add_cargo object="$lockbox" exact="5" ware="ware.inv_agidevice_02"/-->
            <!--TODO: Apply rotation-->
          </do_if>
        </do_if>
        <find_zone name="$zone" macro="macro.Zone004_Cluster_26_Sector002_macro"/>
        <do_if value="$zone.exists">
          <create_object name="$vault" groupname="$VaultsGroup" owner="faction.ownerless" macro="macro.landmarks_vault_04_macro" zone="$zone">
            <position x="-22022m" y="-30m" z="1294m"/>
          </create_object>
          <do_if value="$vault.exists">
            <find_signalleak_location name="$slot" container="$vault"/>
            <create_signal_leak name="$leak17" type="signalleaktype.data" object="$vault" slot="$slot" macro="macro.dataleak_xs_vault_01_macro"/>
            <!--add_cargo object="$lockbox" exact="5" ware="ware.inv_agidevice_02"/-->
            <!--TODO: Apply rotation-->
          </do_if>
        </do_if>
        <find_zone name="$zone" macro="macro.Zone001_Cluster_19_Sector001_macro"/>
        <do_if value="$zone.exists">
          <create_object name="$vault" groupname="$VaultsGroup" owner="faction.ownerless" macro="macro.landmarks_vault_04_macro" zone="$zone">
            <position x="-13000m" y="300m" z="-46688m"/>
          </create_object>
          <do_if value="$vault.exists">
            <find_signalleak_location name="$slot" container="$vault"/>
            <create_signal_leak name="$leak18" type="signalleaktype.data" object="$vault" slot="$slot" macro="macro.dataleak_xs_vault_01_macro"/>
            <!--add_cargo object="$lockbox" exact="5" ware="ware.inv_agidevice_02"/-->
            <!--TODO: Apply rotation-->
          </do_if>
        </do_if>
        <find_zone name="$zone" macro="macro.Zone004_Cluster_34_Sector001_macro"/>
        <do_if value="$zone.exists">
          <create_object name="$vault" groupname="$VaultsGroup" owner="faction.ownerless" macro="macro.landmarks_vault_04_macro" zone="$zone">
            <position x="35621m" y="0m" z="45000m"/>
          </create_object>
          <do_if value="$vault.exists">
            <find_signalleak_location name="$slot" container="$vault"/>
            <create_signal_leak name="$leak19" type="signalleaktype.data" object="$vault" slot="$slot" macro="macro.dataleak_xs_vault_01_macro"/>
            <!--add_cargo object="$lockbox" exact="5" ware="ware.inv_agidevice_02"/-->
            <!--TODO: Apply rotation-->
          </do_if>
        </do_if>
        <find_zone name="$zone" macro="macro.Zone001_Cluster_45_Sector001_macro"/>
        <do_if value="$zone.exists">
          <create_object name="$vault" groupname="$VaultsGroup" owner="faction.ownerless" macro="macro.landmarks_vault_04_macro" zone="$zone">
            <position x="20514m" y="-300m" z="30360m"/>
          </create_object>
          <do_if value="$vault.exists">
            <find_signalleak_location name="$slot" container="$vault"/>
            <create_signal_leak name="$leak20" type="signalleaktype.data" object="$vault" slot="$slot" macro="macro.dataleak_xs_vault_01_macro"/>
            <!--add_cargo object="$lockbox" exact="5" ware="ware.inv_agidevice_02"/-->
            <!--TODO: Apply rotation-->
          </do_if>
        </do_if>

        <find_zone name="$zone" macro="macro.zone003_cluster_24_sector001_macro"/>
        <do_if value="$zone.exists">
          <create_object name="$vault" groupname="$VaultsGroup" owner="faction.ownerless" macro="macro.landmarks_vault_01_macro" zone="$zone">
            <position x="10772m" y="-300m" z="18896m"/>
          </create_object>
          <do_if value="$vault.exists">
            <find_signalleak_location name="$slot" container="$vault"/>
            <create_signal_leak name="$leak21" type="signalleaktype.data" object="$vault" slot="$slot" macro="macro.dataleak_xs_vault_01_macro"/>
            <!--add_cargo object="$lockbox" exact="5" ware="ware.inv_agidevice_02"/-->
            <!--TODO: Apply rotation-->
          </do_if>
        </do_if>
        <find_zone name="$zone" macro="macro.zone004_cluster_18_sector001_macro"/>
        <do_if value="$zone.exists">
          <create_object name="$vault" groupname="$VaultsGroup" owner="faction.ownerless" macro="macro.landmarks_vault_01_macro" zone="$zone">
            <position x="-2087m" y="300m" z="2604m"/>
          </create_object>
          <do_if value="$vault.exists">
            <find_signalleak_location name="$slot" container="$vault"/>
            <create_signal_leak name="$leak22" type="signalleaktype.data" object="$vault" slot="$slot" macro="macro.dataleak_xs_vault_01_macro"/>
            <!--add_cargo object="$lockbox" exact="5" ware="ware.inv_agidevice_02"/-->
            <!--TODO: Apply rotation-->
          </do_if>
        </do_if>
        <find_zone name="$zone" macro="macro.zone005_cluster_41_sector001_macro"/>
        <do_if value="$zone.exists">
          <create_object name="$vault" groupname="$VaultsGroup" owner="faction.ownerless" macro="macro.landmarks_vault_02_macro" zone="$zone">
            <position x="-29109m" y="60m" z="37510m"/>
          </create_object>
          <do_if value="$vault.exists">
            <find_signalleak_location name="$slot" container="$vault"/>
            <create_signal_leak name="$leak23" type="signalleaktype.data" object="$vault" slot="$slot" macro="macro.dataleak_xs_vault_01_macro"/>
            <!--add_cargo object="$lockbox" exact="5" ware="ware.inv_agidevice_02"/-->
            <!--TODO: Apply rotation-->
          </do_if>
        </do_if>

        <!-- Duplicate of the Torus Aeternal Vault for usage in story_tf.xml (Terran DLC) -->
        <find_sector macro="macro.cluster_27_sector001_macro" name="$TheVoid"/>
        <do_if value="$TheVoid">
          <get_safe_pos result="$safePos" value="position.[0, 42km, -270km]" sector="$TheVoid"/>
          <create_object name="$vault" groupname="$VaultsGroup" owner="faction.ownerless" macro="macro.landmarks_vault_02_macro" sector="$TheVoid">
            <position object="$TheVoid" space="$TheVoid" value="$safePos"/>
            <rotation pitch="90deg" roll="90deg" yaw="90deg"/>
          </create_object>
          <do_if value="$vault.exists">
            <find_signalleak_location name="$slot" container="$vault"/>
            <create_signal_leak name="$leak23_b" type="signalleaktype.data" object="$vault" slot="$slot" macro="macro.dataleak_xs_vault_01_macro"/>
            <!--add_cargo object="$lockbox" exact="5" ware="ware.inv_agidevice_02"/-->
            <!--TODO: Apply rotation-->
          </do_if>
          <add_to_group object="$vault" groupname="$TorusVaults"/>
        </do_if>

        <find_zone name="$zone" macro="macro.zone005_cluster_39_sector001_macro"/>
        <do_if value="$zone.exists">
          <create_object name="$vault" groupname="$VaultsGroup" owner="faction.ownerless" macro="macro.landmarks_vault_02_macro" zone="$zone">
            <position x="-30985m" y="-100m" z="36982m"/>
          </create_object>
          <do_if value="$vault.exists">
            <find_signalleak_location name="$slot" container="$vault"/>
            <create_signal_leak name="$leak24" type="signalleaktype.data" object="$vault" slot="$slot" macro="macro.dataleak_xs_vault_01_macro"/>
            <!--add_cargo object="$lockbox" exact="5" ware="ware.inv_agidevice_02"/-->
            <!--TODO: Apply rotation-->
          </do_if>
        </do_if>
        <find_zone name="$zone" macro="macro.zone003_cluster_08_sector001_macro"/>
        <do_if value="$zone.exists">
          <create_object name="$vault" groupname="$VaultsGroup" owner="faction.ownerless" macro="macro.landmarks_vault_03_macro" zone="$zone">
            <position x="-48415m" y="300m" z="21068m"/>
          </create_object>
          <do_if value="$vault.exists">
            <find_signalleak_location name="$slot" container="$vault"/>
            <create_signal_leak name="$leak25" type="signalleaktype.data" object="$vault" slot="$slot" macro="macro.dataleak_xs_vault_01_macro"/>
            <!--add_cargo object="$lockbox" exact="5" ware="ware.inv_agidevice_02"/-->
            <!--TODO: Apply rotation-->
          </do_if>
        </do_if>
        <find_zone name="$zone" macro="macro.zone005_cluster_37_sector001_macro"/>
        <do_if value="$zone.exists">
          <create_object name="$vault" groupname="$VaultsGroup" owner="faction.ownerless" macro="macro.landmarks_vault_03_macro" zone="$zone">
            <position x="12083m" y="0m" z="-18808m"/>
          </create_object>
          <do_if value="$vault.exists">
            <find_signalleak_location name="$slot" container="$vault"/>
            <create_signal_leak name="$leak26" type="signalleaktype.data" object="$vault" slot="$slot" macro="macro.dataleak_xs_vault_01_macro"/>
            <!--add_cargo object="$lockbox" exact="5" ware="ware.inv_agidevice_02"/-->
            <!--TODO: Apply rotation-->
          </do_if>
        </do_if>
        <find_zone name="$zone" macro="macro.zone001_cluster_02_sector001_macro"/>
        <do_if value="$zone.exists">
          <create_object name="$vault" groupname="$VaultsGroup" owner="faction.ownerless" macro="macro.landmarks_vault_04_macro" zone="$zone">
            <position x="-36726m" y="-100m" z="22438m"/>
          </create_object>
          <do_if value="$vault.exists">
            <find_signalleak_location name="$slot" container="$vault"/>
            <create_signal_leak name="$leak27" type="signalleaktype.data" object="$vault" slot="$slot" macro="macro.dataleak_xs_vault_01_macro"/>
            <!--add_cargo object="$lockbox" exact="5" ware="ware.inv_agidevice_02"/-->
            <!--TODO: Apply rotation-->
          </do_if>
        </do_if>
        <find_zone name="$zone" macro="macro.zone003_cluster_30_sector001_macro"/>
        <do_if value="$zone.exists">
          <create_object name="$vault" groupname="$VaultsGroup" owner="faction.ownerless" macro="macro.landmarks_vault_04_macro" zone="$zone">
            <position x="34182m" y="-100m" z="47513m"/>
          </create_object>
          <do_if value="$vault.exists">
            <find_signalleak_location name="$slot" container="$vault"/>
            <create_signal_leak name="$leak28" type="signalleaktype.data" object="$vault" slot="$slot" macro="macro.dataleak_xs_vault_01_macro"/>
            <!--add_cargo object="$lockbox" exact="5" ware="ware.inv_agidevice_02"/-->
            <!--TODO: Apply rotation-->
          </do_if>
        </do_if>

        <!--find_zone name="$zone" macro="macro.Zone003_Cluster_04_Sector001_macro"/>
        <do_if value="$zone.exists">
          <create_object name="$vault" groupname="$VaultsGroup" owner="faction.ownerless" macro="macro.landmarks_vault_04_macro" zone="$zone">
            <position x="18000m" y="0m" z="7400m"/>
          </create_object>
          <do_if value="$vault.exists">
            
          </do_if>
        </do_if-->

      </actions>
      <patch sinceversion="2">
        <create_group groupname="$VaultsGroup"/>
        <create_group groupname="$UnlockedVaultsGroup"/>
        <find_object groupname="$VaultsGroup" space="player.galaxy" multiple="true">
          <match_any>
            <match macro="macro.landmarks_vault_01_macro"/>
            <match macro="macro.landmarks_vault_02_macro"/>
            <match macro="macro.landmarks_vault_03_macro"/>
            <match macro="macro.landmarks_vault_04_macro"/>
          </match_any>
        </find_object>
        <do_all exact="$VaultsGroup.count" counter="$i">
          <set_owner object="$VaultsGroup.{$i}" faction="faction.ownerless"/>
          <find_object_component name="$Patch__Leak" object="$VaultsGroup.{$i}" signalleaktype="signalleaktype.data"/>
          <do_if value="not $Patch__Leak">
            <add_to_group groupname="$UnlockedVaultsGroup" object="$VaultsGroup.{$i}"/>
          </do_if>
        </do_all>
        <remove_value name="$Patch__Leak"/>
      </patch>
      <patch sinceversion="3">
        <!-- Duplicate of the Torus Aeternal Vault for usage in story_tf.xml (Terran DLC) -->
        <find_sector macro="macro.cluster_27_sector001_macro" name="$TheVoid"/>
        <do_if value="$TheVoid">
          <get_safe_pos result="$safePos" value="position.[0, 42km, -270km]" sector="$TheVoid"/>
          <create_object name="$vault" groupname="$VaultsGroup" owner="faction.ownerless" macro="macro.landmarks_vault_02_macro" sector="$TheVoid">
            <position object="$TheVoid" space="$TheVoid" value="$safePos"/>
            <rotation pitch="90deg" roll="90deg" yaw="90deg"/>
          </create_object>
          <do_if value="$vault.exists">
            <find_signalleak_location name="$slot" container="$vault"/>
            <create_signal_leak name="$leak23_b" type="signalleaktype.data" object="$vault" slot="$slot" macro="macro.dataleak_xs_vault_01_macro"/>
            <!--add_cargo object="$lockbox" exact="5" ware="ware.inv_agidevice_02"/-->
            <!--TODO: Apply rotation-->
          </do_if>
          <add_to_group object="$vault" groupname="$TorusVaults"/>
        </do_if>
      </patch>
      <patch sinceversion="4">
        <set_value name="$Patch__UnlockedCount" exact="$UnlockedVaultsGroup.count"/>
        <do_all exact="$VaultsGroup.count" counter="$i">
          <find_object_component name="$Patch__Leak" object="$VaultsGroup.{$i}" signalleaktype="signalleaktype.data"/>
          <do_if value="not $Patch__Leak">
            <add_to_group groupname="$UnlockedVaultsGroup" object="$VaultsGroup.{$i}"/>
          </do_if>
        </do_all>
        <do_if value="$UnlockedVaultsGroup.count != $Patch__UnlockedCount">
          <debug_text text="'Updating the vault unlock status'" filter="savegame"/>
          <signal_objects object="player.entity" param="'datavault_unlocked'"/>
        </do_if>
        <remove_value name="$Patch__Leak"/>
        <remove_value name="$Patch__UnlockedCount"/>
      </patch>
      <patch sinceversion="5">
        <do_for_each name="$UnlockedVault" in="$UnlockedVaultsGroup">
          <debug_text text="'Setting unlocked datavault ' + $UnlockedVault + ' in ' + $UnlockedVault.sector.knownname + ' to unlocked state'" filter="savegame"/>
          <set_object_unlock_state object="$UnlockedVault" state="unlocked"/>
        </do_for_each>
      </patch>
      <cues>
        <!--Required variable: $TimelineID (string)-->
        <library name="Unlock_Timeline_Entry">
          <actions>
            <!--debug_text text="'leak 1 unlocked'" filter="general"/-->
            <substitute_text text="$TimelineUserdataID" source="'timeline_$ID$'">
              <replace string="'$ID$'" with="$TimelineID"/>
            </substitute_text>
            <set_value name="$NewTimelineEntry" exact="not @userdata.{$TimelineUserdataID}"/>
            <!--Attempt to unlock the encyclopedia entry regardless, just for safety-->
            <add_encyclopedia_entry item="$TimelineID" type="timeline"/>
            <do_if value="$NewTimelineEntry">
              <show_notification text="{1015,189}"/>
            </do_if>
            <do_else>
              <show_notification text="{1015,192}"/>
            </do_else>
            <do_if value="event.name == 'event_player_repaired_signal_leak'">
              <add_to_group groupname="$UnlockedVaultsGroup" object="event.param2"/>
              <set_object_unlock_state object="event.param2" state="unlocked"/>
            </do_if>
            <do_else>
              <add_to_group groupname="$UnlockedVaultsGroup" object="event.param.object"/>
              <set_object_unlock_state object="event.param.object" state="unlocked"/>
            </do_else>
            <signal_objects object="player.entity" param="'datavault_unlocked'" param2="[event.param, $TimelineID]"/>
            <remove_value name="$TimelineUserdataID"/>
            <remove_value name="$NewTimelineEntry"/>
          </actions>
        </library>

        <cue name="Place_DataVaults_Unlocked1">
          <conditions>
            <check_any>
              <event_player_signal_unlock_finished signal="$leak1"/>
              <event_player_repaired_signal_leak signal="$leak1"/>
            </check_any>
          </conditions>
          <actions>
            <set_value name="$TimelineID" exact="'earth_jumpgates'"/>
            <include_actions ref="Unlock_Timeline_Entry"/>
          </actions>
        </cue>
        <cue name="Place_DataVaults_Unlocked2">
          <conditions>
            <check_any>
              <event_player_signal_unlock_finished signal="$leak2"/>
              <event_player_repaired_signal_leak signal="$leak2"/>
            </check_any>
          </conditions>
          <actions>
            <set_value name="$TimelineID" exact="'winterblossom'"/>
            <include_actions ref="Unlock_Timeline_Entry"/>
          </actions>
        </cue>
        <cue name="Place_DataVaults_Unlocked3">
          <conditions>
            <check_any>
              <event_player_signal_unlock_finished signal="$leak3"/>
              <event_player_repaired_signal_leak signal="$leak3"/>
            </check_any>
          </conditions>
          <actions>
            <set_value name="$TimelineID" exact="'terraformer_project_starts'"/>
            <include_actions ref="Unlock_Timeline_Entry"/>
          </actions>
        </cue>
        <cue name="Place_DataVaults_Unlocked4">
          <conditions>
            <check_any>
              <event_player_signal_unlock_finished signal="$leak4"/>
              <event_player_repaired_signal_leak signal="$leak4"/>
            </check_any>
          </conditions>
          <actions>
            <set_value name="$TimelineID" exact="'terraformer_project_ends'"/>
            <include_actions ref="Unlock_Timeline_Entry"/>
          </actions>
        </cue>
        <cue name="Place_DataVaults_Unlocked5">
          <conditions>
            <check_any>
              <event_player_signal_unlock_finished signal="$leak5"/>
              <event_player_repaired_signal_leak signal="$leak5"/>
            </check_any>
          </conditions>
          <actions>
            <set_value name="$TimelineID" exact="'terraformer_war'"/>
            <include_actions ref="Unlock_Timeline_Entry"/>
          </actions>
        </cue>
        <cue name="Place_DataVaults_Unlocked6">
          <conditions>
            <check_any>
              <event_player_signal_unlock_finished signal="$leak6"/>
              <event_player_repaired_signal_leak signal="$leak6"/>
            </check_any>
          </conditions>
          <actions>
            <set_value name="$TimelineID" exact="'first_contact_paranid'"/>
            <include_actions ref="Unlock_Timeline_Entry"/>
          </actions>
        </cue>
        <cue name="Place_DataVaults_Unlocked7">
          <conditions>
            <check_any>
              <event_player_signal_unlock_finished signal="$leak7"/>
              <event_player_repaired_signal_leak signal="$leak7"/>
            </check_any>
          </conditions>
          <actions>
            <set_value name="$TimelineID" exact="'foundation_federation'"/>
            <include_actions ref="Unlock_Timeline_Entry"/>
          </actions>
        </cue>
        <cue name="Place_DataVaults_Unlocked8">
          <conditions>
            <check_any>
              <event_player_signal_unlock_finished signal="$leak8"/>
              <event_player_repaired_signal_leak signal="$leak8"/>
            </check_any>
          </conditions>
          <actions>
            <set_value name="$TimelineID" exact="'first_contact_boron'"/>
            <include_actions ref="Unlock_Timeline_Entry"/>
          </actions>
        </cue>
        <cue name="Place_DataVaults_Unlocked9">
          <conditions>
            <check_any>
              <event_player_signal_unlock_finished signal="$leak9"/>
              <event_player_repaired_signal_leak signal="$leak9"/>
            </check_any>
          </conditions>
          <actions>
            <set_value name="$TimelineID" exact="'first_contact_split'"/>
            <include_actions ref="Unlock_Timeline_Entry"/>
          </actions>
        </cue>
        <cue name="Place_DataVaults_Unlocked10">
          <conditions>
            <check_any>
              <event_player_signal_unlock_finished signal="$leak10"/>
              <event_player_repaired_signal_leak signal="$leak10"/>
            </check_any>
          </conditions>
          <actions>
            <set_value name="$TimelineID" exact="'foundation_community'"/>
            <include_actions ref="Unlock_Timeline_Entry"/>
          </actions>
        </cue>
        <cue name="Place_DataVaults_Unlocked11">
          <conditions>
            <check_any>
              <event_player_signal_unlock_finished signal="$leak11"/>
              <event_player_repaired_signal_leak signal="$leak11"/>
            </check_any>
          </conditions>
          <actions>
            <set_value name="$TimelineID" exact="'cold_war'"/>
            <include_actions ref="Unlock_Timeline_Entry"/>
          </actions>
        </cue>
        <cue name="Place_DataVaults_Unlocked12">
          <conditions>
            <check_any>
              <event_player_signal_unlock_finished signal="$leak12"/>
              <event_player_repaired_signal_leak signal="$leak12"/>
            </check_any>
          </conditions>
          <actions>
            <set_value name="$TimelineID" exact="'first_contact_teladi'"/>
            <include_actions ref="Unlock_Timeline_Entry"/>
          </actions>
        </cue>
        <cue name="Place_DataVaults_Unlocked13">
          <conditions>
            <check_any>
              <event_player_signal_unlock_finished signal="$leak13"/>
              <event_player_repaired_signal_leak signal="$leak13"/>
            </check_any>
          </conditions>
          <actions>
            <set_value name="$TimelineID" exact="'xenon_evolution'"/>
            <include_actions ref="Unlock_Timeline_Entry"/>
          </actions>
        </cue>
        <cue name="Place_DataVaults_Unlocked14">
          <conditions>
            <check_any>
              <event_player_signal_unlock_finished signal="$leak14"/>
              <event_player_repaired_signal_leak signal="$leak14"/>
            </check_any>
          </conditions>
          <actions>
            <set_value name="$TimelineID" exact="'kyle_brennan_arrival'"/>
            <include_actions ref="Unlock_Timeline_Entry"/>
          </actions>
        </cue>
        <cue name="Place_DataVaults_Unlocked15">
          <conditions>
            <check_any>
              <event_player_signal_unlock_finished signal="$leak15"/>
              <event_player_repaired_signal_leak signal="$leak15"/>
            </check_any>
          </conditions>
          <actions>
            <set_value name="$TimelineID" exact="'khaak_arrival'"/>
            <include_actions ref="Unlock_Timeline_Entry"/>
          </actions>
        </cue>
        <cue name="Place_DataVaults_Unlocked16">
          <conditions>
            <check_any>
              <event_player_signal_unlock_finished signal="$leak16"/>
              <event_player_repaired_signal_leak signal="$leak16"/>
            </check_any>
          </conditions>
          <actions>
            <set_value name="$TimelineID" exact="'presidents_end'"/>
            <include_actions ref="Unlock_Timeline_Entry"/>
          </actions>
        </cue>
        <cue name="Place_DataVaults_Unlocked17">
          <conditions>
            <check_any>
              <event_player_signal_unlock_finished signal="$leak17"/>
              <event_player_repaired_signal_leak signal="$leak17"/>
            </check_any>
          </conditions>
          <actions>
            <set_value name="$TimelineID" exact="'omicron_lyrae'"/>
            <include_actions ref="Unlock_Timeline_Entry"/>
          </actions>
        </cue>
        <cue name="Place_DataVaults_Unlocked18">
          <conditions>
            <check_any>
              <event_player_signal_unlock_finished signal="$leak18"/>
              <event_player_repaired_signal_leak signal="$leak18"/>
            </check_any>
          </conditions>
          <actions>
            <set_value name="$TimelineID" exact="'race_to_find_earth'"/>
            <include_actions ref="Unlock_Timeline_Entry"/>
          </actions>
        </cue>
        <cue name="Place_DataVaults_Unlocked19">
          <conditions>
            <check_any>
              <event_player_signal_unlock_finished signal="$leak19"/>
              <event_player_repaired_signal_leak signal="$leak19"/>
            </check_any>
          </conditions>
          <actions>
            <set_value name="$TimelineID" exact="'terran_khaak_assistance'"/>
            <include_actions ref="Unlock_Timeline_Entry"/>
          </actions>
        </cue>
        <cue name="Place_DataVaults_Unlocked20">
          <conditions>
            <check_any>
              <event_player_signal_unlock_finished signal="$leak20"/>
              <event_player_repaired_signal_leak signal="$leak20"/>
            </check_any>
          </conditions>
          <actions>
            <set_value name="$TimelineID" exact="'operation_final_fury'"/>
            <include_actions ref="Unlock_Timeline_Entry"/>
          </actions>
        </cue>
        <cue name="Place_DataVaults_Unlocked21">
          <conditions>
            <check_any>
              <event_player_signal_unlock_finished signal="$leak21"/>
              <event_player_repaired_signal_leak signal="$leak21"/>
            </check_any>
          </conditions>
          <actions>
            <set_value name="$TimelineID" exact="'agi_tension'"/>
            <include_actions ref="Unlock_Timeline_Entry"/>
          </actions>
        </cue>
        <cue name="Place_DataVaults_Unlocked22">
          <conditions>
            <check_any>
              <event_player_signal_unlock_finished signal="$leak22"/>
              <event_player_repaired_signal_leak signal="$leak22"/>
            </check_any>
          </conditions>
          <actions>
            <set_value name="$TimelineID" exact="'terran_conflict'"/>
            <include_actions ref="Unlock_Timeline_Entry"/>
          </actions>
        </cue>
        <cue name="Place_DataVaults_Unlocked23_a">
          <conditions>
            <check_any>
              <event_player_signal_unlock_finished signal="$leak23"/>
              <event_player_repaired_signal_leak signal="$leak23"/>
            </check_any>
          </conditions>
          <actions>
            <set_value name="$TimelineID" exact="'torus_aeternal'"/>
            <include_actions ref="Unlock_Timeline_Entry"/>
          </actions>
        </cue>
        <cue name="Place_DataVaults_Unlocked23_b">
          <conditions>
            <check_any>
              <event_player_signal_unlock_finished signal="$leak23_b"/>
              <event_player_repaired_signal_leak signal="$leak23_b"/>
            </check_any>
          </conditions>
          <actions>
            <set_value name="$TimelineID" exact="'torus_aeternal'"/>
            <include_actions ref="Unlock_Timeline_Entry"/>
          </actions>
        </cue>
        <cue name="Place_DataVaults_Unlocked24">
          <conditions>
            <check_any>
              <event_player_signal_unlock_finished signal="$leak24"/>
              <event_player_repaired_signal_leak signal="$leak24"/>
            </check_any>
          </conditions>
          <actions>
            <set_value name="$TimelineID" exact="'warp_instability'"/>
            <include_actions ref="Unlock_Timeline_Entry"/>
          </actions>
        </cue>
        <cue name="Place_DataVaults_Unlocked25">
          <conditions>
            <check_any>
              <event_player_signal_unlock_finished signal="$leak25"/>
              <event_player_repaired_signal_leak signal="$leak25"/>
            </check_any>
          </conditions>
          <actions>
            <set_value name="$TimelineID" exact="'gate_shutdown'"/>
            <include_actions ref="Unlock_Timeline_Entry"/>
          </actions>
        </cue>
        <cue name="Place_DataVaults_Unlocked26">
          <conditions>
            <check_any>
              <event_player_signal_unlock_finished signal="$leak26"/>
              <event_player_repaired_signal_leak signal="$leak26"/>
            </check_any>
          </conditions>
          <actions>
            <set_value name="$TimelineID" exact="'alliance_of_the_word'"/>
            <include_actions ref="Unlock_Timeline_Entry"/>
          </actions>
        </cue>
        <cue name="Place_DataVaults_Unlocked27">
          <conditions>
            <check_any>
              <event_player_signal_unlock_finished signal="$leak27"/>
              <event_player_repaired_signal_leak signal="$leak27"/>
            </check_any>
          </conditions>
          <actions>
            <set_value name="$TimelineID" exact="'gate_reopening'"/>
            <include_actions ref="Unlock_Timeline_Entry"/>
          </actions>
        </cue>
        <cue name="Place_DataVaults_Unlocked28">
          <conditions>
            <check_any>
              <event_player_signal_unlock_finished signal="$leak28"/>
              <event_player_repaired_signal_leak signal="$leak28"/>
            </check_any>
          </conditions>
          <actions>
            <set_value name="$TimelineID" exact="'gate_stabilisation'"/>
            <include_actions ref="Unlock_Timeline_Entry"/>
          </actions>
        </cue>
        <!-- DLC_Mini_02 adds Cues:
             <cue name="Place_DataVaults_29" comment="patch for dlc_mini_02 vault 29">
              ...
              <cues>
                <cue name="Place_DataVaults_Unlocked29">...</cue>
              </cues>
             </cue>
        -->
      </cues>
    </cue>

    <cue name="Place_DataVaults_Scenario2">
      <conditions>
        <event_cue_signalled/>
      </conditions>
      <actions>
        <create_group groupname="$DemoVaultsGroup"/>

        <!--data vaults-->
        <find_zone name="$zone" macro="macro.demo_zone001_cluster_13_sector001_macro"/>
        <do_if value="$zone.exists">
          <create_object name="$vault" groupname="$DemoVaultsGroup" owner="faction.ownerless" macro="macro.landmarks_vault_01_macro" zone="$zone">
            <position x="39120.523" y="0m" z="-27900.398m"/>
            <rotation pitch="14deg" roll="14deg"/>
          </create_object>
          <do_if value="$vault.exists">
            <find_signalleak_location name="$slot" container="$vault"/>
            <create_signal_leak name="$leak_scenario2" type="signalleaktype.data" object="$vault" slot="$slot" macro="macro.dataleak_xs_vault_01_macro"/>
          </do_if>
        </do_if>
      </actions>
      <cues>
        <cue name="Place_DataVaults_Scenario2_Unlocked">
          <conditions>
            <check_any>
              <event_player_signal_unlock_finished signal="$leak_scenario2"/>
              <event_player_repaired_signal_leak signal="$leak_scenario2"/>
            </check_any>
          </conditions>
          <actions>
            <set_value name="$TimelineID" exact="'earth_jumpgates'"/>
            <include_actions ref="Unlock_Timeline_Entry"/>
          </actions>
        </cue>
      </cues>
    </cue>

    <cue name="Place_ParanidMonument" comment="patchcode for 3.x existing savegames">
      <conditions>
        <event_cue_signalled/>
      </conditions>
      <actions>
        <find_sector name="$ParanidMonumentSector" macro="macro.cluster_11_sector001_macro" comment=""/>
        <find_object name="$ParanidMonument" space="$ParanidMonumentSector" macro="macro.landmarks_par_monument_01_macro"/>
        <do_if value="not $ParanidMonument">
          <create_object macro="macro.landmarks_par_monument_01_macro" sector="$ParanidMonumentSector">
            <safepos x="92024.027" y="-1532.621" z="13449.546"/>
            <rotation pitch="0deg" roll="0deg" yaw="90deg"/>
          </create_object>
        </do_if>
      </actions>
    </cue>

    <cue name="Place_DerelictStationMonument" comment="patchcode for 3.x existing savegames">
      <conditions>
        <event_cue_signalled/>
      </conditions>
      <actions>
        <find_sector name="$DerelictSector" macro="macro.cluster_35_sector001_macro" comment="Lasting Vengeance"/>
        <find_object name="$DerelictStation" space="$DerelictSector" macro="macro.landmarks_gen_old_ringstation_macro"/>
        <do_if value="not $DerelictStation">
          <create_object macro="macro.landmarks_gen_old_ringstation_macro" sector="$DerelictSector">
            <safepos x="-244000.027" y="-5432.621" z="200000.546"/>
          </create_object>
        </do_if>
      </actions>
    </cue>

  </cues>
</mdscript>
